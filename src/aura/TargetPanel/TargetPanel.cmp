<aura:component >
    
    <aura:attribute name="groups" type="Object[]" />
    <aura:attribute name="newGroupName" type="String" />
    <aura:attribute name="dragCounter" type="Integer" default="0" />
    
    <aura:registerEvent name="onObjectClicked" type="c:actionEvent" />
    <aura:registerEvent name="onRemoveObject" type="c:actionEvent" />
    <aura:registerEvent name="onAddGroup" type="c:actionEvent" />
    <aura:registerEvent name="onDragObjectToGroup" type="c:actionEvent" />
    
    <aura:handler name="onIconClicked" event="c:actionEvent" action="{!c.onRemoveObject}" />
    <aura:handler name="onLabelClicked" event="c:actionEvent" action="{!c.onObjectClicked}" />
    
    <c:panel title="Groups" titleClass="slds-text-heading_small">
        <aura:set attribute="icon">
        	<lightning:icon iconName="standard:product_item" size="small"/>
        </aura:set>
        <div class="slds-grid slds-grid_vertical-align-end">
            <div class="slds-col slds-p-right_small" style="width:100%;">
                <lightning:input type="text" label="New Group" name="newGroup" value="{!v.newGroupName}" />
            </div>
            <div class="slds-col slds-col_bump-left">
                <lightning:buttonIcon iconName="utility:add" alternativeText="Add" iconClass="slds-button_icon-x-small" disabled="{! empty(v.newGroupName)}" onclick="{!c.onAddGroup}" />
            </div>
        </div>
        <br />
        
        <div style="max-height:100vh;overflow:scroll;">
            
            <aura:iteration items="{!v.groups}" var="group">
                <div data-drop-effect="all" class="dropTarget" data-group="{!group.value}" ondragenter="{!c.onDragEnter}" ondragleave="{!c.onDragLeave}" ondragover="{!c.onDragOver}" ondrop="{!c.onDrop}">
                    <c:GroupPanel group="{!group}" />
                </div>
                <br />
            </aura:iteration>
        </div>
        
    </c:panel>
    
</aura:component>