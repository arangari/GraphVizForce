<aura:component >

    <aura:attribute name="object" type="Object" />
    <aura:attribute name="selectedAttributes" type="Object[]" access="private" />
    <aura:attribute name="availableAttributes" type="Object[]" access="private" />
    <aura:attribute name="availableSearchTerm" type="String" access="private" />
    <aura:attribute name="selectedSearchTerm" type="String" access="private" />
    
    <aura:handler name="change" value="{!v.object}" action="{!c.handleObjectChange}" />
    
    <aura:registerEvent name="onObjectAttributesUpdated" type="c:actionEvent" />
    
    <div class="slds-text-heading_small">{!v.object.label}</div>
    <br />
    <div class="slds-grid">
        <div class="slds-size-1-of-2 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-p-right_x-small" style="width:50%;">
            <c:panel title="Available">
                <lightning:input type="search" label="Search" name="search" value="{!v.availableSearchTerm}" onchange="{!c.onSearchAvailable}" />
                <br />
                <ul style="max-height:100vh;overflow:scroll;">
                    <aura:iteration items="{!v.availableAttributes}" var="field">
                        <aura:if isTrue="{!field.visible}">
                        	<li class="slds-p-bottom_xxx-small">
                                <c:pill value="{!field}" iconName="right" fullWidth="true" onIconClicked="{!c.onAddClicked}" />
                            </li>
                        </aura:if>
                    </aura:iteration>
                </ul>
            </c:panel>
        </div>
        <div class="slds-size-1-of-2 slds-medium-size_1-of-2 slds-large-size_1-of-2" style="width:50%;">
            <c:panel title="Selected">
                <lightning:input type="search" label="Search" name="search" value="{!v.selectedSearchTerm}" onchange="{!c.onSearchSelected}" />
                <br />
                <ul style="max-height:100vh;overflow:scroll;">
                    <aura:iteration items="{!v.selectedAttributes}" var="field">
                        <aura:if isTrue="{!field.visible}">
                        	<li class="slds-p-bottom_xxx-small">
                            <c:pill value="{!field}" iconName="left" iconPosition="left" fullWidth="true" onIconClicked="{!c.onRemoveClicked}" />
                        </li>
                        </aura:if>
                    </aura:iteration>
                </ul>
            </c:panel>
        </div>
    </div>
</aura:component>